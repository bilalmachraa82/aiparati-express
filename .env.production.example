# AutoFund AI - Production Environment Configuration
# Copy this to .env.production and fill in your values

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://autofund:your_password@your-db-host:5432/autofund_ai

# Database connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_ECHO=false

# ==========================================
# REDIS CONFIGURATION
# ==========================================
# Redis connection URL
REDIS_URL=redis://your-redis-host:6379/0

# Redis connection pool
REDIS_MAX_CONNECTIONS=50

# ==========================================
# API CONFIGURATION
# ==========================================
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=false
ENVIRONMENT=production

# ==========================================
# SECURITY CONFIGURATION
# ==========================================
# JWT secret key - generate with: openssl rand -base64 32
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password reset
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=24

# ==========================================
# ANTHROPIC AI API
# ==========================================
# Get your API key from https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key

# Model configurations
MODEL_EXTRACTION=claude-3-5-sonnet-20241022
MODEL_ANALYSIS=claude-opus-4-5-20251101

# API settings
ANTHROPIC_MAX_RETRIES=3
ANTHROPIC_TIMEOUT=60

# ==========================================
# FILE STORAGE CONFIGURATION
# ==========================================
UPLOAD_DIR=/app/uploads
OUTPUT_DIR=/app/outputs
MAX_FILE_SIZE=10485760

# S3-compatible storage (optional)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_BUCKET_NAME=autofund-files
AWS_REGION=eu-west-1
AWS_S3_ENDPOINT=https://s3.eu-west-1.amazonaws.com

# ==========================================
# PROCESSING CONFIGURATION
# ==========================================
MOCK_MODE=false
PROCESSING_TIMEOUT=600
MAX_CONCURRENT_TASKS=10

# ==========================================
# RATE LIMITING CONFIGURATION
# ==========================================
ANONYMOUS_RATE_LIMIT=10
USER_RATE_LIMIT=30
PREMIUM_RATE_LIMIT=100
ENTERPRISE_RATE_LIMIT=500
RATE_LIMIT_WINDOW=3600

# ==========================================
# QUOTA CONFIGURATION
# ==========================================
FREE_TIER_QUOTA=5
PREMIUM_TIER_QUOTA=100
ENTERPRISE_TIER_QUOTA=1000

# ==========================================
# CORS CONFIGURATION
# ==========================================
# Comma-separated list of allowed origins
CORS_ORIGINS=["https://autofund.ai", "https://www.autofund.ai", "https://app.autofund.ai"]

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=INFO
LOG_FILE=/app/logs/autofund_ai.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=10

# ==========================================
# MONITORING CONFIGURATION
# ==========================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Sentry (error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
# SMTP settings
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your-sendgrid-api-key
SMTP_TLS=true

# Email from address
EMAIL_FROM=noreply@autofund.ai
EMAIL_FROM_NAME=AutoFund AI

# ==========================================
# PAYMENT CONFIGURATION
# ==========================================
# Stripe (for payments)
STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_PRICE_ID_FREE=price_free
STRIPE_PRICE_ID_PREMIUM=price_premium_monthly
STRIPE_PRICE_ID_ENTERPRISE=price_enterprise_monthly

# ==========================================
# ANALYTICS CONFIGURATION
# ==========================================
# Google Analytics
GA_MEASUREMENT_ID=G-XXXXXXXXXX

# PostHog (product analytics)
POSTHOG_API_KEY=your-posthog-api-key
POSTHOG_HOST=https://app.posthog.com

# ==========================================
# EXTERNAL SERVICES
# ==========================================
# NIF validation API (Portuguese tax authority)
NIF_VALIDATION_API_URL=https://www.nif.pt/
NIF_VALIDATION_API_KEY=your-nif-api-key

# IAPMEI API (Portuguese agency for SMEs)
IAPMEI_API_URL=https://www.iapmei.pt/
IAPMEI_API_KEY=your-iapmei-api-key

# ==========================================
# FEATURE FLAGS
# ==========================================
# Enable/disable features
FEATURE_BETA_ACCESS=false
FEATURE_BULK_PROCESSING=false
FEATURE_WEBHOOKS=true
FEATURE_API_DOCS=false

# ==========================================
# WEBHOOK CONFIGURATION
# ==========================================
# Webhook for task completion notifications
WEBHOOK_URL=https://your-webhook-endpoint.com/notify
WEBHOOK_SECRET=your-webhook-secret

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
# Database backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=autofund-backups

# ==========================================
# SECURITY HARDENING
# ==========================================
# SSL/TLS settings
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# Security headers
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true

# ==========================================
# DEPLOYMENT SPECIFIC
# ==========================================
# Railway deployment
RAILWAY_ENVIRONMENT=production
RAILWAY_SERVICE_NAME=api

# Vercel deployment
VERCEL_ENV=production
VERCEL_URL=autofund.ai

# Docker
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE_NAME=autofund-ai
DOCKER_TAG=latest

# ==========================================
# MONITORING ENDPOINTS
# ==========================================
# Health check endpoints
HEALTH_CHECK_ENDPOINT=/api/system/health
READY_CHECK_ENDPOINT=/api/system/ready
METRICS_ENDPOINT=/api/system/metrics

# ==========================================
# DEBUGGING (KEEP DISABLED IN PRODUCTION)
# ==========================================
# Enable debugging (never in production!)
DEBUG_SQL=false
DEBUG_REQUESTS=false
PROFILING_ENABLED=false