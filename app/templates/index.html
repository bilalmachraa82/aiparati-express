<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoFund AI - Automação de Candidaturas Portugal 2030</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1><i class="fas fa-chart-line"></i> AutoFund AI</h1>
                <p class="subtitle">Candidaturas Portugal 2030 em 3 minutos</p>
            </div>
            <nav class="nav">
                <button class="btn btn-secondary" onclick="showLogin()">
                    <i class="fas fa-user"></i> Login
                </button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h2>Transforme 2 horas de trabalho em 2 minutos</h2>
                    <p>Extraia dados do IES automaticamente, analise com IA, e gere templates IAPMEI prontos a submeter</p>
                </div>
            </section>

            <!-- Upload Section -->
            <section class="upload-section" id="uploadSection">
                <div class="upload-container">
                    <h3>Submeta o seu IES</h3>
                    <div class="upload-area" id="uploadArea" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Arraste o ficheiro IES PDF aqui ou</p>
                        <input type="file" id="fileInput" accept=".pdf" style="display: none;" onchange="handleFileSelect(event)">
                        <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                            Selecionar Ficheiro
                        </button>
                        <p class="upload-hint">Formato: PDF (Máx: 50MB)</p>
                    </div>

                    <!-- Context Input -->
                    <div class="context-input" id="contextSection" style="display: none;">
                        <h4>Contexto da Empresa (Opcional)</h4>
                        <textarea id="companyContext" rows="4" placeholder="Descreva brevemente o projeto, objetivos, e qualquer informação relevante para a candidatura..."></textarea>
                        <button class="btn btn-success" onclick="uploadFile()">
                            <i class="fas fa-play"></i> Iniciar Análise
                        </button>
                    </div>
                </div>
            </section>

            <!-- Processing Section -->
            <section class="processing-section" id="processingSection" style="display: none;">
                <h3>Análise em Progresso</h3>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">0%</div>
                </div>
                <div class="status-message" id="statusMessage">
                    <i class="fas fa-spinner fa-spin"></i>
                    <span>A processar...</span>
                </div>
                <div class="processing-steps">
                    <div class="step" id="step1">
                        <i class="fas fa-file-pdf"></i>
                        <span>Extração de Dados</span>
                    </div>
                    <div class="step" id="step2">
                        <i class="fas fa-brain"></i>
                        <span>Análise Financeira</span>
                    </div>
                    <div class="step" id="step3">
                        <i class="fas fa-file-excel"></i>
                        <span>Geração Excel</span>
                    </div>
                    <div class="step" id="step4">
                        <i class="fas fa-check-circle"></i>
                        <span>Concluído</span>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <h3>Análise Completa</h3>
                <div class="results-grid">
                    <div class="result-card">
                        <h4><i class="fas fa-chart-pie"></i> Análise Financeira</h4>
                        <div class="metrics" id="financialMetrics">
                            <!-- Metrics will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="result-card">
                        <h4><i class="fas fa-trophy"></i> Elegibilidade Portugal 2030</h4>
                        <div class="eligibility-score" id="eligibilityScore">
                            <!-- Score will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="result-card">
                        <h4><i class="fas fa-lightbulb"></i> Recomendações</h4>
                        <div class="recommendations" id="recommendations">
                            <!-- Recommendations will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="download-section">
                    <h4>Download Resultados</h4>
                    <div class="download-buttons">
                        <button class="btn btn-excel" onclick="downloadExcel()">
                            <i class="fas fa-file-excel"></i> Baixar Excel IAPMEI
                        </button>
                        <button class="btn btn-pdf" onclick="downloadPDF()">
                            <i class="fas fa-file-pdf"></i> Baixar Relatório PDF
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 AutoFund AI. Todos os direitos reservados.</p>
            <p>Desenvolvido com ❤️ em Portugal</p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/app.js"></script>
</body>
</html>